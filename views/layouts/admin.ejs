<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <title><%= typeof title !== 'undefined' ? title + ' · Admin · Pansa TMDB SaaS' : 'Admin · Pansa TMDB SaaS' %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="/public/favicon.ico" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <link rel="stylesheet" href="/public/css/app.css" />
</head>
<body class="bg-slate-950 text-slate-100 min-h-full flex">
  <!-- Sidebar -->
  <aside class="hidden md:flex md:flex-col w-60 border-r border-slate-800 bg-slate-950/90">
    <div class="px-4 py-4 border-b border-slate-800 flex items-center space-x-2">
      <div class="w-8 h-8 rounded-xl bg-gradient-to-tr from-indigo-500 via-fuchsia-500 to-amber-300 shadow-glow"></div>
      <div class="flex flex-col leading-tight">
        <span class="text-xs uppercase tracking-[0.18em] text-slate-400">PansaGroup</span>
        <span class="text-sm font-semibold">Admin Panel</span>
      </div>
    </div>
    <nav class="flex-1 px-2 py-3 text-xs space-y-1">
      <a href="/admin" class="admin-nav-link">Overview</a>
      <a href="/admin/sites" class="admin-nav-link">Sites</a>
      <div class="mt-3 text-[10px] text-slate-500 uppercase tracking-wide">Settings</div>
      <a href="/admin/settings/tmdb" class="admin-nav-link">TMDB API</a>
      <a href="/admin/settings/qris" class="admin-nav-link">QRIS Billing</a>
    </nav>
    <div class="px-4 py-3 text-[11px] border-t border-slate-800">
      <div class="text-slate-400 mb-1">Logged in as</div>
      <div class="font-semibold"><%= currentUser && currentUser.email %></div>
      <a href="/auth/logout" class="inline-block mt-2 px-3 py-1 rounded bg-slate-800 hover:bg-slate-700 text-[11px]">
        Logout
      </a>
    </div>
  </aside>

  <!-- Main -->
  <main class="flex-1 min-h-screen flex flex-col">
    <header class="md:hidden border-b border-slate-800 bg-slate-950/90 backdrop-blur px-3 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <div class="w-7 h-7 rounded-lg bg-gradient-to-tr from-indigo-500 via-fuchsia-500 to-amber-300"></div>
        <span class="text-sm font-semibold">Admin Panel</span>
      </div>
      <a href="/auth/logout" class="text-[11px] px-3 py-1 rounded bg-slate-800 hover:bg-slate-700">Logout</a>
    </header>
    <div class="flex-1 max-w-6xl mx-auto w-full px-3 py-4">
      <%- body %>
    </div>
  </main>

  <script>
    function showToast(type, message) {
      const icon = type === 'success' ? 'success'
          : type === 'error' ? 'error'
          : type === 'warning' ? 'warning'
          : 'info';
      Swal.fire({
        toast: true,
        position: 'top-end',
        icon: icon,
        title: message,
        showConfirmButton: false,
        timer: 2500,
        timerProgressBar: true
      });
    }
  </script>
</body>
</html>
